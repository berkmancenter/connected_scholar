<!-- javascript -->
<script type="text/javascript">
    var clientVars = {};
</script>

<% with_etherpad_server do |protocol, host, port| %>
    <script type="text/javascript" src="<%= protocol %>://<%= host %>:<%= port %>/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="<%= protocol %>://<%= host %>:<%= port %>/minified/pad.js"></script>
    <script type="text/javascript" src="/js/jquery.ui.draggable.min.js"></script>
    <script type="text/javascript" src="/js/jquery.ui.droppable.min.js"></script>
    <script type="text/javascript" src="/js/jquery.ui.accordion.min.js"></script>
    <script>
        var etherpadServerConfig = new Array();
        etherpadServerConfig['host'] = "<%= host %>";
        etherpadServerConfig['port'] = "<%= port %>";
        etherpadServerConfig['protocol'] = "<%= protocol %>";
    </script>
    <script type="text/javascript" src="/js/handshake.js"></script>
<% end %>
<script type="text/javascript">
  $(function(){
      // rebuild the export links
      $("#exporthtmla").click(function(event){
          $("#exporthtmla").attr("href", document.location.pathname + "/export/html" + document.location.search);
      });
      $("#exportplaina").click(function(event){
        $("#exportplaina").attr("href", document.location.pathname + "/export/txt" + document.location.search);
      });
      $("#exportwordlea").click(function(event){
        $("#exportwordlea").attr("href", document.location.pathname + "/export/wordle" + document.location.search);
      });
      // rebuild timeslider link
      $("#timesliderlink").click(function(event){
          document.location = document.location.pathname +  '/timeslider' + document.location.search;
      })
  });

</script>
